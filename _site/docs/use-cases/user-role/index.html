<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>User Role - Intuit API Docs</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>User Role | Intuit API Docs</title> <meta name="generator" content="Jekyll v4.1.1" /> <meta property="og:title" content="User Role" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Documentation for Intuit’s APIs" /> <meta property="og:description" content="Documentation for Intuit’s APIs" /> <link rel="canonical" href="http://localhost:4000/docs/use-cases/user-role/" /> <meta property="og:url" content="http://localhost:4000/docs/use-cases/user-role/" /> <meta property="og:site_name" content="Intuit API Docs" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="User Role" /> <script type="application/ld+json"> {"url":"http://localhost:4000/docs/use-cases/user-role/","headline":"User Role","description":"Documentation for Intuit’s APIs","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> Intuit API Docs </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/getting-started" class="nav-list-link">Getting Started</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/docs/getting-started/authentication/" class="nav-list-link">Authentication</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/getting-started/scopes/" class="nav-list-link">Scopes</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/getting-started/graphql-ide/" class="nav-list-link">GraphQL IDE</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/graphql-concepts" class="nav-list-link">GraphQL Concepts</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/docs/graphql-concepts/query/" class="nav-list-link">Query</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/graphql-concepts/mutation/" class="nav-list-link">Mutation</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/faq" class="nav-list-link">FAQ</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/docs/faq/payroll/" class="nav-list-link">Payroll</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/faq/accounting/" class="nav-list-link">Accounting</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/use-cases" class="nav-list-link">Use Cases</a><ul class="nav-list "><li class="nav-list-item active"><a href="http://localhost:4000/docs/use-cases/user-role/" class="nav-list-link active">User Role</a></li><li class="nav-list-item "><a href="http://localhost:4000/docs/use-cases/401k/" class="nav-list-link">401k</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Intuit API Docs" aria-label="Search Intuit API Docs" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/docs/use-cases">Use Cases</a></li> <li class="breadcrumb-nav-list-item"><span>User Role</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <!-- Copy and paste the converted output. --> <!----- NEW: Check the "Suppress top comment" option to remove this info from the output. Conversion time: 0.68 seconds. Using this Markdown file: 1. Paste this output into your source file. 2. See the notes and action items below regarding this conversion run. 3. Check the rendered output (headings, lists, code blocks, tables) for proper formatting and use a linkchecker before you publish this page. Conversion notes: * Docs to Markdown version 1.0β29 * Tue Dec 01 2020 13:22:42 GMT-0800 (PST) * Source doc: Role API (copy) * Tables are currently converted to HTML tables. -----> <h2 id="user-role"> <a href="#user-role" class="anchor-heading" aria-labelledby="user-role"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> User Role </h2> <p>This document provides technical details for using the new Role API to retrieve user role information in the context of a given company.</p> <h3 id="api-url"> <a href="#api-url" class="anchor-heading" aria-labelledby="api-url"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> API URL: </h3> <p>Role API is exposed under a new endpoint. Make a POST request to the endpoint below.</p> <p><strong>Endpoint:</strong></p> <p>Prod: <a href="https://public.api.intuit.com/2020-04/graphql">https://public.api.intuit.com/2020-04/graphql</a></p> <p>E2E: <a href="https://public-e2e.api.intuit.com/2020-04/graphql">https://public-e2e.api.intuit.com/2020-04/graphql</a></p> <p><strong>Required Headers:</strong></p> <p>Content-Type: application/json</p> <p>Authorization: OAuth2 authorization header using new scope.</p> <h3 id="scopes"> <a href="#scopes" class="anchor-heading" aria-labelledby="scopes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Scopes: </h3> <p>User role data is protected under a new scope <strong><em>com.intuit.identity.user.roles.read</em></strong>. For apps that are already using the internal Role API, we will honor the tokens that were generated using <strong><em>com.intuit.identity.accounts.restricted</em></strong> scope to support their existing customers.</p> <ul> <li>For existing customers - Continue to use the tokens generated using <strong><em>com.intuit.identity.accounts.restricted</em></strong> scope.</li> <li>For new customers - Use the following scope <strong><em>com.intuit.identity.user.roles.read</em>.</strong></li> </ul> <p>Note: App’s also should be onboarded to the new scope before they can start using it.</p> <h3 id="api-request"> <a href="#api-request" class="anchor-heading" aria-labelledby="api-request"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> API request: </h3> <p><em>Note: Before making the API call, make sure to generate Oauth token by sending the scope com.intuit.identity.user.roles.read and send the token in the request header.</em></p> <h4 id="queries"> <a href="#queries" class="anchor-heading" aria-labelledby="queries"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Queries: </h4> <h5 id="request-user-role-for-a-realm"> <a href="#request-user-role-for-a-realm" class="anchor-heading" aria-labelledby="request-user-role-for-a-realm"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Request user role for a realm </h5> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> {

  user{

  role (realmId: "9130349878530396") {

    type

    status

    hasPayroll

  }

  }

}
</code></pre></div></div> <p>Sample Response</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{

  "data": {

    "user": {

      "role": {

        "type": "ADMIN",

        "status": "ACTIVE",

        "hasPayroll": true

      }

    }

  }

}
</code></pre></div></div> <h5 id="request-user-role-for-an-invalid-realm"> <a href="#request-user-role-for-an-invalid-realm" class="anchor-heading" aria-labelledby="request-user-role-for-an-invalid-realm"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Request user role for an invalid realm </h5> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> {

  user{

  role (realmId: "9130349878530397") {

    type

    status

    hasPayroll

  }

  }

}
</code></pre></div></div> <p>Sample Response</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{

 "errors": [

   {

     "message": "User id not part of the realm!",

     "locations": [

       {

         "line": 3,

         "column": 3

       }

     ],

     "path": [],

     "extensions": {

       "code": "VAL-1002",

       "innerMessage": "User id not part of the realm!",

       "classification": "VALIDATION_ERROR"

     }

   }

 ]

}
</code></pre></div></div> <h3 id="description-of-fields"> <a href="#description-of-fields" class="anchor-heading" aria-labelledby="description-of-fields"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Description of Fields: </h3> <p><em>Note: Can share schema file if needed.</em></p> <div class="table-wrapper"><table> <tr> <td> </td> <td><strong>Field</strong> </td> <td><strong>DataType</strong> </td> <td><strong>Description</strong> </td> </tr> <tr> <td>role </td> <td>realmId (required) </td> <td>String </td> <td>Company id for which the user role is needed </td> </tr> <tr> <td> </td> <td>type </td> <td>Enum - ADMIN, EMPLOYEE </td> <td>Indicates the role type for the user such as ADMIN or EMPLOYEE </td> </tr> <tr> <td> </td> <td>status </td> <td>Enum - ACTIVE, INACTIVE </td> <td>Indicates user’s status within the company such as ACTIVE or INACTIVE </td> </tr> <tr> <td> </td> <td>hasPayroll </td> <td>Boolean </td> <td>Indicates if user has payroll access </td> </tr> </table></div> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">&copy; 2020 Intuit Inc. All rights reserved. Intuit and QuickBooks are registered trademarks of Intuit Inc. Terms and conditions, features, support, pricing, and service options subject to change without notice.</p> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/bcole/intuit-api-docs/tree/gh-pages/docs/use-cases/user-role.md" id="edit-this-page">Edit this page on GitHub.</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
